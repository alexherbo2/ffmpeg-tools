#!/bin/sh

if test $# -lt 2 -o $# -gt 3; then
  cat <<'EOF' | sed -E 's/^ {4}//' > /dev/stderr
    Usage
    ‾‾‾‾‾
    ffmpeg-sub <input> <output> [subtitles-stream = 0]

    Examples
    ‾‾‾‾‾‾‾‾
    ffmpeg-sub 01.mkv 01.ass
    ffmpeg-sub 01.mkv 01.ass 1

    You can see the subtitles streams with `ffmpeg -i` or more concisely in mpv.
    It starts at 0.
EOF
  exit 1
fi

input=$1 output=$2 subtitles_stream=${3:-0}
ffmpeg -i "$input" -map "0:s:$subtitles_stream" "$output"
